

process {

  cpus   =  1
  memory =  2.GB

  maxRetries = 2
  maxErrors = '-1'
  errorStrategy = 'terminate'

  withName: make_big_matrix {
    memory = 10.GB
  }

  withName: prepare {
    cpus = 2
    memory = 5.GB          // 20 on small test set
  }
  withName: clusters_index {
    memory = 500.MB
  }
  withName: clusters_makebam {
    memory = 4.GB
  }
  withName: peaks_masterlist {
    memory = 1.GB
  }
  withName: cells_masterlist_coverage {
    memory = 1.GB
  }

  withName: 'clusters_macs2' {
    cpus = 2
    memory = 20.GB
    container = 'fooliu/macs2'
  }

  withName: 'make_peakmatrix' {
    cpus = 2
    memory = 20.GB
  }
}



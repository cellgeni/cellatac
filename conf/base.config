

process {

  cpus   =  1
  memory =  2.GB

  maxRetries = 2
  maxErrors = '-1'
  errorStrategy = 'terminate'


  withName: genome_make_windows {
    memory = 1.GB
  }
  withName: posbam_prepare_info {
    cpus = 2
    memory = 5.GB          // 20 on small test set
  }
  withName: cells_window_coverage_P2 {
    memory = 2.GB
  }
  withName: clusters_index_P4 {
    memory = 500.MB
  }
  withName: clusters_makebam_P4 {
    memory = 4.GB
  }
  withName: peaks_masterlist {
    memory = 1.GB
  }
  withName: cells_masterlist_coverage {
    memory = 1.GB
  }

  withName: 'clusters_define_cusanovich2018_P3' {
    cpus = 2
    memory = 50.GB
    container = 'quay.io/cellgeni/cellclusterer'
  }
  withName: 'clusters_define_cusanovich2018_P3_B' {
    cpus = 2
    memory = 30.GB          // check report.
    container = 'quay.io/cellgeni/cellclusterer'
  }
  withName: 'clusters_define_cusanovich2018_P3_C' {
    cpus = 2
    memory = 30.GB
    container = 'quay.io/cellgeni/cellclusterer'
  }

  withName: 'clusters_macs2_P4' {
    cpus = 2
    memory = 20.GB
    container = 'fooliu/macs2'
  }

  withName: 'make_peakmatrix' {
    cpus = 2
    memory = 20.GB
  }
}


